"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2405],{9600:function(e,t,r){r.d(t,{appConfig:function(){return s}});let s={i18n:{locales:["en","zh-cn","zh-tw","ko","ja","pt","es","de","fr","vi","it","ru"],defaultLocale:"en",localeLabels:{en:"English","zh-cn":"简体中文","zh-tw":"繁體中文",ko:"한국어",ja:"日本語",pt:"Portugu\xeas",es:"Espa\xf1ol",de:"Deutsch",fr:"fran\xe7ais",vi:"Tiếng Việt",it:"Italiano",ru:"Русский язык"},localeCurrencies:{en:"USD"}},auth:{oAuthProviders:["google"]},marketing:{menu:[{translationKey:"pricing",href:"/pricing"},{translationKey:"blog",href:"/Blog"}]},teams:{avatarColors:["#0072f5","#9dbee5","#8e7db7","#6dc4ae"]}}},5301:function(e,t,r){r.d(t,{jD:function(){return a},rU:function(){return n},tv:function(){return l}});var s=r(9600);let{Link:n,redirect:i,usePathname:a,useRouter:l}=(0,r(55171).iV)({locales:s.appConfig.i18n.locales,localePrefix:"as-needed"})},92405:function(e,t,r){r.r(t),r.d(t,{LoginForm:function(){return j}});var s=r(8412),n=r(9600),i=r(43533),a=r(5301),l=r(51596),o=r(32953),u=r(65645),c=r(40613),d=r(21594),f=r(39996),g=r(42294),h=r(11148),m=r(97269),v=r(26745),x=r(14263);let p={google:{name:"Google",icon:c.J.google},apple:{name:"Apple",icon:c.J.apple},github:{name:"Github",icon:c.J.github},twitter:{name:"Twitter",icon:c.J.twitter}};function b(e){let{provider:t,className:r,redirect:n}=e,i=(0,f.useTranslations)(),a=p[t];return(0,s.jsx)(u.z,{asChild:!0,type:"button",className:r,children:(0,s.jsxs)("div",{className:"flex items-center justify-center p-[2px]",children:[a.icon&&(0,s.jsx)("i",{className:"h-full w-8 rounded-sm bg-white",children:(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)(a.icon,{className:"h-4 w-4"})})}),(0,s.jsx)("a",{href:"/api/oauth/".concat(t,"?redirect=").concat(encodeURIComponent(n||"")),className:"flex flex-1 items-center",children:(0,s.jsx)("span",{className:"flex flex-1 items-center justify-center",children:i("auth.continueWithProvider",{provider:a.name})})})]})})}var w=r(83505);let y=v.z.object({email:v.z.string().email(),password:v.z.optional(v.z.string())});function j(e){var t;let{isLoginModal:r=!1,redirectUrl:v=""}=e,p=(0,f.useTranslations)(),j=(0,g.useRouter)(),{user:N,loaded:C}=(0,x.a)(),[S,k]=(0,h.useState)("password"),[E,A]=(0,h.useState)(null),P=(0,g.useSearchParams)(),z=l.x.auth.loginWithPassword.useMutation(),U=l.x.auth.loginWithEmail.useMutation(),{register:R,handleSubmit:L,reset:I,setValue:M,formState:{isSubmitting:J,isSubmitted:O}}=(0,m.cI)({resolver:(0,i.F)(y)}),T=P.get("invitationCode"),F=T?"/team/invitation?code=".concat(T):null!==(t=P.get("redirectTo"))&&void 0!==t?t:"/app",_=P.get("email");(0,h.useEffect)(()=>{_&&M("email",_)},[_]),(0,h.useEffect)(()=>{I(),A(null)},[S]);let q=()=>{window.location.href=new URL(F,window.location.origin).toString()};(0,h.useEffect)(()=>{N&&C&&q()},[N,C]);let D=async e=>{let{email:t,password:s}=e;A(null);try{if("password"===S)await z.mutateAsync({email:t,password:s}),r&&v?window.location.href=new URL(v,window.location.origin).toString():q();else{await U.mutateAsync({email:t,callbackUrl:new URL("/auth/verify",window.location.origin).toString()});let e=new URLSearchParams;e.set("type","LOGIN"),e.set("redirectTo",F),T&&e.set("invitationCode",T),t&&e.set("identifier",t),j.replace("/auth/otp?".concat(e.toString()))}}catch(e){A({title:p("auth.login.hints.invalidCredentials.title"),message:p("auth.login.hints.invalidCredentials.message")})}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold",children:p("auth.login.title")}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 mt-4",children:p("auth.login.subtitle")}),T&&(0,s.jsx)(w.u,{className:"mb-6"}),(0,s.jsx)("div",{className:"flex flex-col items-stretch gap-3",children:n.appConfig.auth.oAuthProviders.map(e=>(0,s.jsx)(b,{className:"rounded-sm p-0",provider:e,redirect:v},e))}),(0,s.jsxs)("div",{className:"my-8 flex items-center space-x-2",children:[(0,s.jsx)("hr",{className:"flex-1"}),(0,s.jsx)("span",{children:p("auth.login.or")}),(0,s.jsx)("hr",{className:"flex-1"})]}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:L(D),children:[O&&E&&(0,s.jsxs)(o.bZ,{variant:"error",children:[(0,s.jsx)(c.J.warning,{className:"h-4 w-4"}),(0,s.jsx)(o.Cd,{children:E.title}),(0,s.jsx)(o.X,{children:E.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"mb-1 block font-semibold",children:p("auth.login.email")}),(0,s.jsx)(d.I,{type:"email",...R("email",{required:!0}),required:!0,autoComplete:"email"})]}),"password"===S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"mb-1 block font-semibold",children:p("auth.login.password")}),(0,s.jsx)(d.I,{type:"password",...R("password",{required:!0}),required:!0,autoComplete:"current-password"}),(0,s.jsx)("div",{className:"mt-1 text-right text-sm",children:(0,s.jsx)(a.rU,{href:"/auth/forgot-password",children:p("auth.login.forgotPassword")})})]}),(0,s.jsx)(u.z,{className:"w-full ",variant:"outline",type:"submit",loading:J,children:"password"===S?p("auth.login.submit"):p("auth.login.sendMagicLink")}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:[p("auth.login.dontHaveAnAccount")," "]}),(0,s.jsxs)(a.rU,{href:"/auth/signup".concat(T?"?invitationCode=".concat(T,"&email=").concat(_):""),children:[p("auth.login.createAnAccount")," →"]})]})]})]})}},83505:function(e,t,r){r.d(t,{u:function(){return l}});var s=r(8412),n=r(32953),i=r(40613),a=r(39996);function l(e){let{className:t}=e,r=(0,a.useTranslations)();return(0,s.jsxs)(n.bZ,{variant:"primary",className:t,children:[(0,s.jsx)(i.J.invitation,{className:"h-4 w-4"}),(0,s.jsx)(n.Cd,{children:r("auth.teamInvitation.title")}),(0,s.jsx)(n.X,{children:r("auth.teamInvitation.description")})]})}},14263:function(e,t,r){r.d(t,{a:function(){return i}});var s=r(11148),n=r(14192);function i(){return(0,s.useContext)(n.userContext)}},14192:function(e,t,r){r.r(t),r.d(t,{UserContextProvider:function(){return u},userContext:function(){return o}});var s=r(8412),n=r(51596),i=r(42294),a=r(11148);let l=new BroadcastChannel("auth"),o=(0,a.createContext)({user:null,reloadUser:()=>Promise.resolve(),logout:()=>Promise.resolve(),updateSetting:e=>Promise.resolve(),loaded:!1,teamMembership:null});function u(e){let{children:t,initialUser:r,teamMembership:u}=e,c=(0,i.useRouter)(),[d,f]=(0,a.useState)(!!r),[g,h]=(0,a.useState)(r),m=n.x.auth.user.useQuery(void 0,{refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:!r}),v=n.x.auth.logout.useMutation(),x=n.x.auth.updateUserSetting.useMutation(),p=async()=>{await m.refetch()},b=async()=>{await v.mutateAsync(),m.remove(),h(null),l.postMessage({type:"logout",user:null}),c.replace("/")},w=async e=>{if(g){let t={...g.settings};Object.keys(e).forEach(r=>{e[r]&&(t[r]=e[r])}),await x.mutateAsync(t),h(e=>e?{...e,settings:t}:null)}};return(0,a.useEffect)(()=>{m.data&&h(m.data)},[m.data]),(0,a.useEffect)(()=>{m.isSuccess&&f(!0)},[m.isSuccess]),(0,a.useEffect)(()=>{g&&d&&l.postMessage({type:"loaded",user:g})},[g,d]),(0,a.useEffect)(()=>{let e=async e=>{JSON.stringify(e.data.user)!==JSON.stringify(g)&&("logout"===e.data.type?(m.remove(),h(null),c.replace("/")):h(e.data.user))};return l.addEventListener("message",e),()=>l.removeEventListener("message",e)},[g]),(0,s.jsx)(o.Provider,{value:{user:g,reloadUser:p,logout:b,updateSetting:w,loaded:d,teamMembership:null!=u?u:null},children:t})}},51596:function(e,t,r){r.d(t,{x:function(){return s}});let s=(0,r(70996).ec)({})},32953:function(e,t,r){r.d(t,{Cd:function(){return u},X:function(){return c},bZ:function(){return o}});var s=r(8412),n=r(93652),i=r(12567),a=r(11148);let l=(0,i.j)("relative w-full rounded-lg border p-6 [&>svg~*]:pl-8 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-6 [&>svg]:top-6 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",primary:"border-primary/20 bg-primary/10 text-primary [&>svg]:text-primary",error:"border-destructive/20 bg-destructive/10 text-destructive [&>svg]:text-destructive",success:"border-success/20 bg-success/10 text-success [&>svg]:text-success"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:i,...a}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:i}),r),...a})});o.displayName="Alert";let u=a.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...i})});u.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...i})});c.displayName="AlertDescription"},65645:function(e,t,r){r.d(t,{z:function(){return c}});var s=r(8412),n=r(92498),i=r(11148),a=r(93652),l=r(12567),o=r(40613);let u=(0,l.j)("inline-flex items-center justify-center text-sm font-semibold transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",error:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"text-primary hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",slate:"bg-slate-900 text-white hover:bg-slate-700 hover:text-slate-100 active:bg-slate-800 active:text-slate-300 focus-visible:outline-slate-900",blue:"bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600",white:"bg-white text-slate-900 hover:bg-blue-50 active:bg-blue-200 active:text-slate-600 focus-visible:outline-white",slateOutline:"ring-1 ring-slate-200 text-slate-700 hover:text-slate-900 hover:ring-slate-300 active:bg-slate-100 active:text-slate-600 focus-visible:outline-blue-600 focus-visible:ring-slate-300",whiteOutline:"ring-1 ring-slate-700 text-white hover:ring-slate-500 active:ring-slate-700 active:text-slate-400 focus-visible:outline-white"},size:{default:"h-9 rounded-full px-4 py-2",sm:"h-8 rounded-full px-3 text-sm",lg:"h-10 rounded-full px-8 text-base",icon:"h-9 w-9 rounded-sm"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,children:i,variant:l,size:c,asChild:d=!1,loading:f,disabled:g,...h}=e,m=d?n.g7:"button";return(0,s.jsx)(m,{className:(0,a.cn)(u({variant:l,size:c,className:r})),ref:t,disabled:g||f,...h,children:f?(0,s.jsx)(o.J.spinner,{className:"h-4 w-4 animate-spin"}):i})});c.displayName="Button"},21594:function(e,t,r){r.d(t,{I:function(){return i}});var s=r(8412),n=r(93652);let i=r(11148).forwardRef((e,t)=>{let{className:r,type:i,...a}=e;return(0,s.jsx)("input",{type:i,className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:ring-ring focus-visible:border-primary flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});i.displayName="Input"}}]);